<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Upload Official Material — Faculty</title>
<link rel="stylesheet" href="../styles.css"></head>
<body>
<header class="app-header"><div class="wrap">
  <div class="brand"><div class="badge">B</div><div><div class="brand-name">BookShare</div><div id="roleChip" class="muted small"></div></div></div>
  <div class="userbar"><div id="whoami" class="muted small"></div><a class="btn ghost" href="#" id="logout">Logout</a></div>
</div></header>

<div class="container shell">
  <aside class="sidebar"><nav class="card nav"><a data-id="dashboard" href="dashboard.html">Dashboard</a>
<a data-id="profile" href="profile.html">View/Edit Profile</a>
<a data-id="notifications" href="notifications.html">Notifications</a>
<a data-id="upload-official" href="upload-official.html">Upload Official Material</a>
<a data-id="post-ad" href="post-ad.html">Post Book Ad</a>
<a data-id="my-ads" href="my-ads.html">View My Ads</a>
<a data-id="browse" href="browse.html">Browse Book Ads</a>
<a data-id="search" href="search.html">Search Books</a></nav></aside>
  <main class="card main-panel">
    <div class="titlebar"><h2>Upload Official Material</h2><div></div></div>
    <div><div class="grid grid-2"><div class="field"><label>Select File (≤ 50 MB)</label><input type="file"/></div><div class="field"><label>Subject</label><input/></div><div class="field"><label>Semester</label><input/></div><div class="field"><label>Academic Year</label><input/></div></div><div class="mt-12"><button class="btn success">Upload & Verify</button></div></div>
  </main>
</div>
<script src="../js/auth.js"></script>
<script>
ensureRole('faculty');
activateNav('upload-official');
document.getElementById('logout').addEventListener('click', (e)=>{ e.preventDefault(); logoutUp(); });
</script>
</body></html>
<script src="../js/auth.js"></script>
<script>
ensureRole('faculty');
activateNav('upload-official');
document.querySelector('.btn.success').addEventListener('click', async ()=>{
  alert('File upload is stubbed in this demo. We will just create a Material record.');
  const inputs = document.querySelectorAll('.field input');
  const subject = inputs[1].value || 'Untitled';
  const semester = inputs[2].value || '';
  const ay = inputs[3].value || '';
  const res = await fetch(`${API_BASE}/materials/`, {
    method:'POST', headers:{'Content-Type':'application/json', ...authHeader()},
    body: JSON.stringify({subject, semester, academic_year: ay, filename: (inputs[0].files[0]?.name || 'file.pdf')})
  });
  if(!res.ok){ alert('Failed to create material'); return; }
  alert('Material submitted for verification!');
});
</script>
