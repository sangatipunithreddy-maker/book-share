<!DOCTYPE html>
<html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"/><title>BookShare Login</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<section class="center login-bg">
  <div class="login card">
    <div style="display:flex;gap:12px;align-items:center;margin-bottom:8px">
      <div class="badge">B</div>
      <div><h2 style="margin:0">BookShare Login</h2><p class="muted" style="margin:.25rem 0 0">Sign in to continue</p></div>
    </div>
    <form id="loginForm" class="grid gap-14">
      <div class="field"><label>Email</label><input type="email" id="email" placeholder="you@bookshare.edu" required></div>
      <div class="field"><label>Password</label><input type="password" id="password" placeholder="••••••••" required></div>
      <div class="field"><label>Login as</label><select id="role"><option value="student">Student</option><option value="faculty">Faculty</option><option value="admin">Admin</option></select></div>
      <button class="btn" type="submit">Sign In</button>
      <div class="muted small">
        <b>Demo:</b> student@bookshare.edu / <code>student123</code> • faculty@bookshare.edu / <code>faculty123</code> • admin@bookshare.edu / <code>admin123</code>
        <div style="margin-top:6px">No account? <a href="register.html">Create one</a></div>
      </div>
      <p id="loginError" class="error" style="display:none"></p>
    </form>
  </div>
</section>
<script src="js/auth.js"></script>
<script>
document.getElementById('loginForm').addEventListener('submit', (e)=>{
  e.preventDefault();
  const email=document.getElementById('email').value.trim();
  const pwd=document.getElementById('password').value.trim();
  const role=document.getElementById('role').value;
  const users=loadUsers();
  const user=users.find(u=>u.email===email && u.password===pwd && u.role===role);
  if(!user){ const er=document.getElementById('loginError'); er.textContent='Invalid credentials or role'; er.style.display='block'; return; }
  setSession({ token: Math.random().toString(36).slice(2), user:{ id:user.id, name:user.name, email:user.email, role:user.role } });
  if(role==='student') location.href='student/dashboard.html';
  if(role==='faculty') location.href='faculty/dashboard.html';
  if(role==='admin')   location.href='admin/dashboard.html';
});
</script>
</body></html>
